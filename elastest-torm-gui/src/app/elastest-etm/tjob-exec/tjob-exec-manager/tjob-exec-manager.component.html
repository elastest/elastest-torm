<div layout-gt-sm="row" tdMediaToggle="gt-xs" >
    <div flex-gt-sm="100">
        <md-card tdMediaToggle="gt-xs">
            <md-card-title>
                <a (click)="viewTJob()" class="hover-pointer">
                    <span>TJob</span>
                    <span *ngIf="tJob"> "{{tJob.name}}"</span>
                </a>
                <span>: Execution {{tJobExecId}}</span>
                <span>
                    <md-icon *ngIf="tJobExec.finished()" style="vertical-align: middle;" [style.color]="statusIcon.color">{{statusIcon.name}}</md-icon>
                </span>
            </md-card-title>
            <md-divider></md-divider>
            <md-card-content>
                <div layout="row">
                    <span flex-gt-xs="20">
                        <md-card-subtitle>Result</md-card-subtitle>
                        <h4 [style.color]="statusIcon.color">{{tJobExec.result}}</h4>
                    </span>
                    <span flex-gt-xs="20">
                        <md-card-subtitle>Start Date</md-card-subtitle>
                        <h4>{{ tJobExec.startDate }}</h4>
                    </span>
                    <ng-container>
                        <span flex-gt-xs="15" *ngIf="tJobExec.sutExec !== undefined && tJobExec.sutExec === 0">
                            <md-card-subtitle>Sut Execution</md-card-subtitle>
                            <h4>None</h4>
                        </span>
                        <span flex-gt-xs="15" *ngIf="tJobExec.sutExec !== undefined && tJobExec.sutExec !== 0">
                            <md-card-subtitle>Sut Execution</md-card-subtitle>
                            <h4>{{tJobExec.sutExec.id}}</h4>
                        </span>
                    </ng-container>
                    <span flex-gt-xs="15">
                        <md-card-subtitle>Log Index</md-card-subtitle>
                        <h4>{{tJobExec.logIndex}}</h4>
                    </span>
                    <span flex-gt-xs="15">
                        <md-card-subtitle>View in Log Analyzer</md-card-subtitle>
                        <button md-button (click)="viewInLogAnalyzer()" class="onlyIconBtn" title="View in Log Analyzer">
                            <md-icon>library_books</md-icon>
                        </button>
                    </span>

                    <span flex-gt-xs="15">
                        <md-card-subtitle>Monitoring Config</md-card-subtitle>
                        <button md-button (click)="logsAndMetrics.openMonitoringConfig()" class="onlyIconBtn" title="Open Monitoring Config">
                            <md-icon>settings</md-icon>
                        </button>
                    </span>
                </div>
                <td-expansion-panel label="Parameters" expand="false" *ngIf="tJobExec.parameters.length > 0">
                    <td-data-table [data]="tJobExec.parameters"></td-data-table>
                </td-expansion-panel>
            </md-card-content>
        </md-card>
    </div>
</div>

<div layout-gt-sm="row" tdMediaToggle="gt-xs"  *ngIf="tJobExec.testSuite !== undefined && tJobExec.testSuite !== null && tJobExec.testSuite.testCases != undefined && tJobExec.testSuite.testCases != null">
    <div flex-gt-sm="100">
        <md-card tdMediaToggle="gt-xs">
            <md-card-title>
                Test Suite
            </md-card-title>
            <md-divider></md-divider>
            <md-card-content>
                <div layout="row">
                    <span flex-gt-xs="25">
                        <md-card-subtitle>Name</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.name}}</h4>
                    </span>
                    <span flex-gt-xs="25">
                        <md-card-subtitle>NÂº Test</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.numTests}}</h4>
                    </span>
                    <span flex-gt-xs="25">
                        <md-card-subtitle>Errors</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.errors}}</h4>
                    </span>
                    <span flex-gt-xs="25">
                        <md-card-subtitle>Failures</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.failures}}</h4>
                    </span>
                    <span flex-gt-xs="25">
                        <md-card-subtitle>Skipped</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.skipped}}</h4>
                    </span>
                    <span flex-gt-xs="25">
                        <md-card-subtitle>Flakes</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.flakes}}</h4>
                    </span>
                    <span flex-gt-xs="25">
                        <md-card-subtitle>Time Elapsed</md-card-subtitle>
                        <h4>{{tJobExec.testSuite.timeElapsed}}</h4>
                    </span>
                </div>
                <div layout="row" class="push-top">
                    <md-card-subtitle>Test Cases</md-card-subtitle>
                </div>

                <td-data-table #testCasesTable *ngIf="tJobExec.testSuite.testCases.length > 0" class="scroll_table" [data]="tJobExec.testSuite.testCases"
                    [columns]="testCaseColumns" [selectable]="false" [clickable]="false" [sortable]="false">
                </td-data-table>
            </md-card-content>
        </md-card>
    </div>
</div>

<!-- logs & Metrics -->
<etm-monitoring-view #logsAndMetrics [live]="false" [showConfigBtn]="false"></etm-monitoring-view>

<!-- Execution files -->
<etm-files-manager [tJobId]="tJobId" [tJobExecId]="tJobExecId"></etm-files-manager>